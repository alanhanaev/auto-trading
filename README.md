# Арбитражный бот для трех(binance, livecoin, exmo) криптобирж на node.js

## api_modules
Все модули обращаются к api бирж через единую точку входа она называется api_module. api_modules может находится на другом сервере от других частей программы, подключение к нему происходит посредством сокетов, через модуль называемый api_adapter, это было сделанно для того чтобы можно было подсчитать количество запросов с одного аккаунта к бирже и установить лимиты запросов к бирже. api_modules отправляет запросы к биржам через прокси сервера, они прописываются в конфиге, чем их больше тем быстрее происходит загрузка данных с биржи.
## exmo, binance, livecoin 
Отдельные модули для бирж которые в режиме реального времени загружают списки ордеров для маркетов в едином формате в базу данных mongodb. Маркеты выбираются на основе списка используемых валют, которое храниться в mongodb. Информация по маркетам загружается в Mongodb, в виде графа, где каждая вершина это валюта.  Для обращения к api бирж используют api_modules.
## find_routes 
Модуль ищет выгодные маршруты, т. е. если к примеру есть маршрут который при выводе и операциях покупки, продажи увеличит сумму валюты, процент задается в настройках, есть телеграм бот для управления этими настройка, его я вынес в отдельный репозиторий.
Модуль отвечает за объединение матриц графов нескольких бирж в один и поиска маршрутов в этом графе из одной биржи в другую с операциями ввода, вывода, покупки и продажи. Все найденные маршруты потом подсчитываются, и выбираются с лучшей выгодой и который удовлетворяют нашим условиям. Маршруты ищуться между кошельками биржи на которых присутствуют средства. Минимальная и максимальная сумма операции задается для каждой валюты биржи в отдельности (Есть отдельный модуль set_transaction_amounts который отвечает за установку максимальной и минимальной суммы в долларовом эквиваленте). После того как маршрут был найден он отправляется в очередь rabbitmq на выполнение другому модулю, плюс записывается его статус выполнения и параметры в mongodb
## execute_routes
Модуль отвечает за выполнение транзакций ввода, вывода, покупки, продажи валюты, через rabbitmq к нему поступается задача он ее выполняет обращаясь к api через common_api_adapter (который в свою очередь обращается к api_modules). Common_api_adapter был необходим чтобы унифицировать запросы к разным биржам, так как везде различные параметры и запросы.
